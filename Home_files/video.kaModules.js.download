(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1019:function(e,t,a){},175:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadVideo=void 0;var i=f(a(177)),n=a(187),s=f(n),o=f(a(249)),r=f(a(239)),l=a(261),d=f(a(179)),u=a(326),c=a(189),h=f(a(246)),p=a(209),m=a(213);function f(e){return e&&e.__esModule?e:{default:e}}a(330),window.renderKAVideo=function(e){var t=d.default.findAncestor(e,"ms-webpart-chrome");if(t){var a=t.querySelector(".ms-webpart-titleText span");a&&(a.innerHTML="Video")}var s=d.default.findAncestor(e,"ms-WPBody");if(s){var r=s.querySelector(".ms-rte-embedcode-linkedit");r&&(r.style.display="none")}var l=e.getAttribute("width"),u=e.getAttribute("height"),c=e.getAttribute("start");(0,n.render)(i.default.createElement(o.default,{videoID:e.id,width:l?parseInt(l):void 0,height:u?parseInt(u):void 0,startTime:c?parseInt(c):void 0,duration:e.getAttribute("duration"),fileSize:e.getAttribute("fileSize"),trackVideoWatch:m.trackVideoWatch,uploadedAt:e.getAttribute("uploaded")}),e)},window.UploadVideoToPage=function(){var e=document.createElement("input");e.type="file",e.accept=u.MIME_VIDEO,e.onchange=v,e.style.display="none",document.querySelector(".ms-cui-tabBody").appendChild(e),e.click()},window.IsVideoUploadButtonEnabledRTE=function(){return(0,c.isWikiPage)()};var v=function(e){var t=document.getElementById("KAVideoUploadButtonRTE_ToolTip");t&&t.parentElement.removeChild(t),"KAVideoUploadButtonRTE-Large"===document.activeElement.id&&document.activeElement.blur(),window.kaVidUpContainer=document.createElement("div"),window.kaVidUpContainer.style.display="none",document.getElementById("s4-bodyContainer").appendChild(window.kaVidUpContainer),e.target.files[0].size>p.INT_MAX_VIDEO_SIZE?(0,n.render)(i.default.createElement(h.default,{onClose:function(){return s.default.unmountComponentAtNode(window.kaVidUpContainer)},fileAlerts:{videosTooLarge:[e.target.files[0]]}}),window.kaVidUpContainer):e.target.files[0].type.match("video.*")?(0,n.render)(i.default.createElement(r.default,{file:e.target.files[0],onClose:function(){return(0,n.unmountComponentAtNode)(window.kaVidUpContainer)},onUploadEnd:function(t,a){!function(e){var t=SP.Ribbon.WebPartComponent.getWebPartAdder(),a=function(e,t,a){if(e){var i=y(e._cats,t);if(i)return y(i.items,a)}}(t,"Media and Content","Script Editor");if(a){var i=void 0,n=document.querySelector(".s4-wzActive");i=n?n.getAttribute("zoneid"):WPAdder._zones[0].id;var s=void 0;"undefined"!=typeof RTE&&(s=WPAdder._createWebpartPlaceholderInRte()),null==s&&(s=SP.Guid.newGuid().toString("D"));var o=document.createElement("INPUT");if(o.type="hidden",o.name=s+"scriptcontent",o.value=e,document.getElementById("aspnetForm").appendChild(o),d.default.isIE()){var r=document.createElement("button");r.style.visibility="hidden",r.onclick=function(){return t.addItemToPageByItemIdAndZoneId(a.id,i,0,s)},document.body.appendChild(r),r.click()}else window.event=window.event||"I can hack ASP!",t.addItemToPageByItemIdAndZoneId(a.id,i,0,s)}else console.warn("Script Editor web part not found!")}((0,l.getShareCode)(t,null,null,null,a,e.target.files[0].size,(new Date).getTime()))},onUploadFail:function(e){s.default.unmountComponentAtNode(window.kaVidUpContainer),g(e)}}),window.kaVidUpContainer):(0,n.render)(i.default.createElement(h.default,{onClose:function(){return s.default.unmountComponentAtNode(window.kaVidUpContainer)},fileAlerts:{blockedVideoFormat:[e.target.files[0]]}}),window.kaVidUpContainer)},g=function(e){(0,n.render)(i.default.createElement(h.default,{fileAlerts:{videoUploadFailures:[e]},onClose:function(){return s.default.unmountComponentAtNode(window.kaVidUpContainer)}}),window.kaVidUpContainer)};function y(e,t){for(var a=0;a<e.length;a++){var i=e[a];if(i.title==t)return i}}t.loadVideo=function(e){a(1019),d.default.removeVideosInContentEditors(),d.default.validateToken(function(){for(var t=0;t<e.length;t++)window.renderKAVideo(e[t])})}},192:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a(181)),n=p(a(182)),s=p(a(183)),o=p(a(184)),r=p(a(185)),l=a(177),d=p(l),u=p(a(187)),c=a(179),h=p(c);function p(e){return e&&e.__esModule?e:{default:e}}a(283),h.default.isIE()&&a(284);var m=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleKey=a.handleKey.bind(a),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){window.addEventListener("keydown",this.handleKey,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKey,!0)}},{key:"handleKey",value:function(e){this.props.onClose&&27===e.keyCode&&this.props.onClose()}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,i=t.style,n=t.onClose,s=t.title,o=t.titleHelp,r=t.children,l=t.onLeft,h=t.onRight,p=t.hideX,m=t.disableOverlayClick;return u.default.createPortal(d.default.createElement("div",{className:"kamodal-overlay"+(m?" disabled":""),onClick:m?void 0:n},d.default.createElement("div",{className:"kamodal-container "+(a||""),style:i,onClick:function(e){e.stopPropagation()},ref:function(t){return e.box=t}},!p&&d.default.createElement("img",{className:"kamodal-close",src:c.imgRoot+"close_x_sm.svg",title:"Close (Esc)",onClick:n}),s&&d.default.createElement("div",{className:"kamodal-title"},d.default.createElement("span",null,s),o),d.default.createElement("div",{className:"kamodal-content "+(s?"":"notitle")},r)),l&&d.default.createElement("img",{className:"kamodal-left",src:"/_layouts/15/images/KAMasterPage/Right_Arrow_White.png",onClick:function(e){e.stopPropagation(),l()}}),h&&d.default.createElement("img",{className:"kamodal-right",src:"/_layouts/15/images/KAMasterPage/Right_Arrow_White.png",onClick:function(e){e.stopPropagation(),h()}})),document.body)}}]),t}(l.Component);t.default=m},205:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toHHMMSS=void 0;var i=u(a(181)),n=u(a(182)),s=u(a(183)),o=u(a(184)),r=u(a(185)),l=a(177),d=u(l);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,n.default)(this,t),(0,o.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,r.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return d.default.createElement("span",{className:"ka-duration"},h(this.props.duration))}}]),t}(l.Component);t.default=c;var h=t.toHHMMSS=function(e){var t=Math.ceil(parseFloat(e)),a=Math.floor(t/3600),i=Math.floor((t-3600*a)/60),n=t-3600*a-60*i;return n<10&&(n="0"+n),a>0&&i<10&&(i="0"+i),a>0?a+":"+i+":"+n:i+":"+n}},207:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DEF_VIDEO_WIDTH=576,t.DEF_VIDEO_HEIGHT=324,t.MIN_VIDEO_WIDTH=330,t.MAX_VIDEO_WIDTH=1026},209:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.INT_TITLE_MAX_CHARS=150,t.INT_BODY_MAX_CHARS=15e3,t.INT_STREAM_IMAGE_WIDTH=578,t.INT_STREAM_IMAGE_HEIGHT=800,t.INT_COMMENT_IMAGE_WIDTH=492,t.INT_COMMENT_IMAGE_HEIGHT=800,t.INT_STREAM_LESS_CHARS=164,t.INT_COMMENT_LESS_CHARS=1115,t.INT_WEBPAGE_BODY_CHARS=111,t.INT_MAX_VIDEO_SIZE=5368709120,t.INT_MAX_IMAGE_SIZE=31457280},225:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(177),s=(i=n)&&i.__esModule?i:{default:i};t.default=function(e){var t=e.title,a=e.children,i=e.backgroundClick;return s.default.createElement("div",{className:"ka-video-modal-overlay",onClick:i},s.default.createElement("div",{className:"ka-video-modal"},s.default.createElement("div",{className:"ka-video-modal-title"},t),s.default.createElement("div",{className:"ka-video-modal-content"},a)))}},228:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a(186)),n=s(a(177));function s(e){return e&&e.__esModule?e:{default:e}}if(null==o)var o=a(179).static_images;t.default=function(e){return n.default.createElement("img",{src:o.ajax_loader_32,style:(0,i.default)({position:"absolute",left:"50%",top:"50%"},e.style)})}},236:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=U(a(186)),n=U(a(181)),s=U(a(182)),o=U(a(183)),r=U(a(184)),l=U(a(185)),d=a(177),u=U(d),c=U(a(187)),h=U(a(180)),p=U(a(572)),m=a(179),f=U(m),v=U(a(191)),g=U(a(291)),y=U(a(205)),b=U(a(292)),k=a(261),E=U(k),S=U(a(293)),w=U(a(294)),I=U(a(295)),_=a(207),T=U(a(306)),C=U(a(307)),P=U(a(204)),M=U(a(203)),D=a(189),A=U(a(308)),N=a(188);function U(e){return e&&e.__esModule?e:{default:e}}e.videojs=p.default;var O=a(514).default;a(515),a(309),a(310),a(311),P.default.chrome&&((0,D.isEditingWikiPage)()||(0,D.isEditingWebpartPage)())&&a(312);var V=a(313),H=function(e){function t(e){(0,s.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={hover:!1,videoMeta:(0,i.default)({duration:e.duration,fileSize:e.fileSize,uploadedAt:e.uploadedAt},e.videoMeta),playerID:e.videoID+"_"+f.default.generateSimpleID(),isResizable:!a.props.disableSizing&&((0,D.isEditingWikiPage)()||(0,D.isEditingWebpartPage)()),transcode:a.props.didUpload?{progress:-1}:void 0,sessionID:(new Date).getTime(),setupMode:!1,savingPosterFromAPI:!1},a.getVideoMeta=a.getVideoMeta.bind(a),a.setVideoSource=a.setVideoSource.bind(a),a.getTranscodeProgress=a.getTranscodeProgress.bind(a),a.titleUpdated=a.titleUpdated.bind(a),a.posterUpdated=a.posterUpdated.bind(a),a.getThumbnails=a.getThumbnails.bind(a),a.isLowRes=a.isLowRes.bind(a),a.onPlayerReady=a.onPlayerReady.bind(a),a.backgroundClick=a.backgroundClick.bind(a),a.setupPlayerPage=a.setupPlayerPage.bind(a),a.setPosterSize=a.setPosterSize.bind(a),a.renderPlayer=a.renderPlayer.bind(a),a.setScriptEditorValue=a.setScriptEditorValue.bind(a),a.getSizeBasedOnParentAndAspect=a.getSizeBasedOnParentAndAspect.bind(a),a.dimensionBox=a.dimensionBox.bind(a),a.isTranscoding=a.isTranscoding.bind(a),a.isInEditor=a.isInEditor.bind(a),a.setStartTime=a.setStartTime.bind(a),a.onKeyDown=a.onKeyDown.bind(a),a.timeUpdate=a.timeUpdate.bind(a),a.sendAnalytics=a.sendAnalytics.bind(a),a.startAnalytics=a.startAnalytics.bind(a),a.stopAnalytics=a.stopAnalytics.bind(a),a.setPreviewAtTimeUsingAPI=a.setPreviewAtTimeUsingAPI.bind(a),a.openToBeginning=a.openToBeginning.bind(a),a.chunksWatched=[],a.chunksWatched_all=[],a}return(0,l.default)(t,e),(0,o.default)(t,[{key:"isCloseToInt",value:function(e){return e-Math.floor(e)<=.06||Math.ceil(e)-e<=.06}},{key:"componentDidMount",value:function(){var e=this;if(!this.state.videoMeta||"FAILED"!==this.state.videoMeta.transcodeStatus&&"NOFILEYET"!==this.state.videoMeta.transcodeStatus){this.props.disableThumbnails||p.default.getPlugins(["thumbnails"])||p.default.registerPlugin("thumbnails",T.default);var t={};if("/_layouts/15/video/player.aspx"===window.location.pathname.toLowerCase())t.width=_.DEF_VIDEO_WIDTH;else if(this.props.width)t.width=this.props.width;else if(this.state.videoMeta&&this.state.videoMeta.originalWidth&&this.state.videoMeta.originalHeight)t=this.getSizeBasedOnParentAndAspect();else{var a=f.default.findAncestor(c.default.findDOMNode(this),"ka_block");a?t=this.getSizeBasedOnParentAndAspect(a.clientWidth):(t.width=_.DEF_VIDEO_WIDTH,t.height=_.DEF_VIDEO_HEIGHT)}this.videoNode&&(p.default.addLanguage("en",V),this.player=(0,p.default)(this.videoNode,(0,i.default)(R,t),this.onPlayerReady),this.props.disableThumbnails||this.player.one("play",function(){e.getThumbnails()})),this.state.videoMeta.mediaID&&this.state.videoMeta.transcodeStatus?"FINISHED"===this.state.videoMeta.transcodeStatus?this.setVideoSource():"PRIMARY"===this.state.videoMeta.transcodeStatus?this.setVideoSourceTemp():"FAILED"!==this.state.videoMeta.transcodeStatus&&"FAILED2"!==this.state.videoMeta.transcodeStatus||(0,D.logError)(new Error("Video transcode failed for "+this.state.videoMeta.mediaID)):this.getVideoMeta(),this.isLowRes()&&(this.player.addClass("lowres"),this.setState({lowRes:!0}));var n=this.props.fallbackPoster||window.localStorage.getItem("ka_videoPreview_"+this.props.videoID);if(n&&this.player){this.player.poster(n),this.player.el().querySelector("video").poster="";var s=new Image;s.crossOrigin="use-credentials",s.addEventListener("load",function(){var t=void 0;t=s.width/s.height<4/3?"4:3":s.width+":"+s.height,e.player.aspectRatio(t)}),s.src=n}this.setPosterSize(),this.videoNode&&this.player.one("loadedmetadata",function(){e.setState({duration:e.player.duration(),width:e.player.width(),height:e.player.height()}),f.default.isIE()&&e.setStartTime()}),this.setupPlayerPage(),P.default.chrome&&((0,D.isEditingWikiPage)()||(0,D.isEditingWebpartPage)())&&this.videoNode.setAttribute("controls","true")}}},{key:"setStartTime",value:function(){if(this.props.startTime)this.player.currentTime(this.props.startTime);else if(this.state.videoMeta.memberData){var e=this.state.videoMeta.memberData;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){console.warn("Can't parse memberData.",this.state.videoMeta)}e&&e.startTime&&this.player.currentTime(e.startTime)}}},{key:"componentWillReceiveProps",value:function(e){if(e.width!=this.props.width&&this.player){var t=this.getSizeBasedOnParentAndAspect();this.player.width(t.width),this.player.height(t.height)}}},{key:"getSizeBasedOnParentAndAspect",value:function(e,t,a){(t||(t=10),e)||(e=c.default.findDOMNode(this).parentElement.clientWidth);var i=e;a||(a=this.state.videoMeta);var n=a.originalWidth/a.originalHeight;if(!n&&this.player&&(n=this.player.videoWidth()/this.player.videoHeight()),n||(n=this.props.aspectRatio),!n)return{width:i};n<4/3&&(n=4/3);for(var s=i/n;!this.isCloseToInt(s)&&e-i<t;)s=--i/n;return s=this.isCloseToInt(s)?Math.round(s):(i=e)/n,{width:i,height:s,fluid:!1}}},{key:"componentDidUpdate",value:function(e,t,a){this.setPosterSize()}},{key:"setupPlayerPage",value:function(){var e=this;if("/_layouts/15/video/player.aspx"===window.location.pathname.toLowerCase()){var t=document.getElementById("s4-workspace")||document.body;this.setState({containerStyle:{width:_.DEF_VIDEO_WIDTH,marginLeft:(document.getElementById("s4-bodyContainer").clientWidth-_.DEF_VIDEO_WIDTH)/2,marginTop:(t.clientHeight-_.DEF_VIDEO_HEIGHT-19)/2}}),this.player.one("loadeddata",function(){e.setState({containerStyle:(0,i.default)({},e.state.containerStyle,{marginTop:(t.clientHeight-e.player.el().clientHeight-19)/2})}),window.addEventListener("resize",function(){e.windowResizeTimer_videoCentering&&(window.clearTimeout(e.windowResizeTimer_videoCentering),delete e.windowResizeTimer_videoCentering),e.windowResizeTimer_videoCentering=window.setTimeout(function(){e.player&&!e.player.isFullscreen()&&e.setState({containerStyle:(0,i.default)({},e.state.containerStyle,{marginTop:(t.clientHeight-e.player.el().clientHeight-19)/2})})},100)})})}}},{key:"onPlayerReady",value:function(){var e=this;this.player.posterImage.off(["click","tap"]),this.player.posterImage.on(["click","tap"],this.backgroundClick),f.default.isIE()||this.setStartTime(),this.player.one("play",function(){return e.player.focus()}),this.player.on("play",this.startAnalytics),this.player.on("pause",this.stopAnalytics)}},{key:"timeUpdate",value:function(){var e=Math.floor(this.player.currentTime()/this.player.duration()*100);if(e<100&&!this.chunksWatched_all.some(function(t){return t.chunkIndex===e})){var t={chunkIndex:e,timestamp:(new Date).getTime()};this.chunksWatched.push(t),this.chunksWatched_all.push(t)}}},{key:"sendAnalytics",value:function(){this.props.trackVideoWatch&&this.chunksWatched.length>0&&(this.props.trackVideoWatch(this.props.videoID,this.chunksWatched,this.state.sessionID),this.chunksWatched=[])}},{key:"startAnalytics",value:function(){this.timeUpdate(),this.analyticsWatchTimer=window.setInterval(this.timeUpdate,this.player.duration()/105),this.analyticsSendTimer=window.setInterval(this.sendAnalytics,5e3)}},{key:"stopAnalytics",value:function(){this.analyticsWatchTimer&&(window.clearInterval(this.analyticsWatchTimer),delete this.analyticsWatchTimer),this.analyticsSendTimer&&(window.clearInterval(this.analyticsSendTimer),delete this.analyticsSendTimer),this.sendAnalytics()}},{key:"backgroundClick",value:function(){this.props.onSelect?this.props.onSelect():this.state.isResizable?this.isTranscoding()||this.setState({isSelected:!0}):this.player.paused()?this.player.play():this.player.pause()}},{key:"componentWillUnmount",value:function(){this.stopGettingTranscodeProgress()}},{key:"componentWillUpdate",value:function(e,t){!this.state.hovered&&t.hovered?this.player.addClass("hover"):this.state.hovered&&!t.hovered&&this.player.removeClass("hover")}},{key:"getVideoMeta",value:function(){var e=this;v.default.get(apiUrl+"/video/"+this.props.videoID).set({Authorization:"Bearer "+f.default.getToken()}).withCredentials().then(function(t){var a=t.body.results[0];if(e.setState({videoMeta:(0,i.default)({},e.state.videoMeta,a)}),e.isLowRes(a)&&(e.player.addClass("lowres"),e.setState({lowRes:!0})),!e.props.width&&!e.props.height&&a.originalWidth&&a.originalHeight&&a.originalWidth/a.originalHeight<4/3&&e.player.aspectRatio("4:3"),"FINISHED"===a.transcodeStatus?(e.setVideoSource(),e.state.transcode&&100==e.state.transcode.progress&&(e.setState({setupMode:!0}),e.props.processingEnded&&e.props.processingEnded(e.props.videoID))):"PRIMARY"===a.transcodeStatus?(e.setVideoSourceTemp(),e.state.transcode&&100==e.state.transcode.progress&&(e.setState({setupMode:!0}),e.props.processingEnded&&e.props.processingEnded(e.props.videoID),f.default.logVideoTranscode(e.props.videoID,e.state.videoMeta.fileSize,e.state.videoMeta.duration,(new Date).getTime()-e.state.videoMeta.uploadedAt))):"PENDING"===a.transcodeStatus&&e.state.transcode&&100==e.state.transcode.progress?window.setTimeout(e.getVideoMeta,1e3):(e.startGettingTranscodeProgress(),e.player&&e.state.videoMeta.previewImageFilename&&"NOFILEYET"!==e.state.videoMeta.transcodeStatus&&"PENDING"!==e.state.videoMeta.transcodeStatus&&e.player.poster(apiUrl+"/video/"+e.props.videoID+"/blob"+e.state.videoMeta.previewImageFilename),e.player.el().querySelector("video").poster=""),a.originalWidth&&a.originalHeight){var n=c.default.findDOMNode(e);if(n){var s=f.default.findAncestor(n,"ka_block"),o=void 0;o=s?s.clientWidth:e.player.width();var r=e.getSizeBasedOnParentAndAspect(o,null,a);e.player.width(r.width),e.player.height(r.height),e.player.fluid(!1),e.setState(r)}}e.setPosterSize(a)}).catch(function(e){return(0,D.logError)(e)})}},{key:"stopGettingTranscodeProgress",value:function(){null!=this.progressGetter&&(window.clearInterval(this.progressGetter),this.progressGetter=null)}},{key:"startGettingTranscodeProgress",value:function(){var e=this;this.isInEditor()&&(this.props.processingStarted&&this.props.processingStarted(this.props.videoID),this.player&&this.player.fluid()&&this.player.fluid(!1),this.state.transcode||this.setState({transcode:{progress:-1}}),this.progressGetter=window.setInterval(function(){e.getTranscodeProgress()},3e3))}},{key:"getTranscodeProgress",value:function(){var e=this;v.default.get(apiUrl+"/video/"+this.props.videoID+"/progress").set({Authorization:"Bearer "+f.default.getToken()}).then(function(t){var a=parseInt(t.text);NaN!==a&&(a>0&&a<e.state.transcode.progress&&(a=100),e.setState({transcode:{progress:a}}),100===a&&(window.clearInterval(e.progressGetter),e.progressGetter=null,e.getVideoMeta()))}).catch(function(e){})}},{key:"setVideoSource",value:function(){if(this.player){this.state.videoMeta.previewImageFilename&&(this.player.poster(apiUrl+"/video/"+this.props.videoID+"/blob"+this.state.videoMeta.previewImageFilename),this.player.el().querySelector("video").poster="");var e=[{src:apiUrl+"/video/"+this.props.videoID+"/blob/hls/multi_bitrate_playlist.m3u8",type:"application/x-mpegURL"},{src:apiUrl+"/video/"+this.props.videoID+"/blob/mp4/high.mp4",type:"video/mp4"}];f.default.isIE()||e.unshift({src:apiUrl+"/video/"+this.props.videoID+"/blob/dash/manifest.mpd",type:"application/dash+xml"}),this.player.src(e),this.props.openToBeginning&&this.openToBeginning()}window.localStorage.removeItem("ka_videoPreview_"+this.props.videoID)}},{key:"setVideoSourceTemp",value:function(){this.player&&(this.state.videoMeta.previewImageFilename?(this.player.poster(apiUrl+"/video/"+this.props.videoID+"/blob"+this.state.videoMeta.previewImageFilename),this.player.el().querySelector("video").poster=""):console.warn("previewImageFilename not set yet",this.state.videoMeta),this.player.src([{src:apiUrl+"/video/"+this.props.videoID+"/blob/mp4/low.mp4",type:"video/mp4"}]),this.props.openToBeginning&&this.openToBeginning()),window.localStorage.removeItem("ka_videoPreview_"+this.props.videoID)}},{key:"openToBeginning",value:function(){var e=this;this.player.one("loadeddata",function(){e.player.play(),e.player.pause(),e.player.currentTime(0),window.setTimeout(function(){e.player&&!e.player.paused()&&(e.player.pause(),e.player.currentTime(0))},0)})}},{key:"getThumbnails",value:function(){var e=this;v.default.get(apiUrl+"/video/"+this.props.videoID+"/blob/thumbnails.vtt").responseType("blob").set(f.default.getAuthHeader()).withCredentials().then(function(t){e.player&&(e.player.addRemoteTextTrack({kind:"metadata",label:"thumbnails",src:window.URL.createObjectURL(t.body)},!0),e.player.thumbnails({basePath:apiUrl+"/video/"+e.props.videoID+"/blob",width:200,height:112}))}).catch(function(e){return(0,D.logError)(e)})}},{key:"titleUpdated",value:function(e){this.setState({videoMeta:(0,i.default)({},this.state.videoMeta,{title:e}),posterEditorOpen:this.state.setupMode,titleEditorOpen:!1}),this.props.releaseInputControl&&this.props.releaseInputControl()}},{key:"posterUpdated",value:function(e,t){this.player.poster(e),this.player.el().querySelector("video").poster="",this.setState({setupMode:!1,posterEditorOpen:!1}),t&&this.setState({videoMeta:(0,i.default)({},this.state.videoMeta,{previewImageFilename:t})}),this.player&&-1===this.player.poster().indexOf("/posters/")&&this.player.el().querySelector(".vjs-poster").style.removeProperty("background-size")}},{key:"setPreviewAtTimeUsingAPI",value:function(e){var t=this;this.setState({savingPosterFromAPI:!0,setupMode:!1,posterEditorOpen:!1}),v.default.post((0,N.buildReqUrl)("/video/"+this.props.videoID+"/ffmpegpreview")).query({seconds:e}).authBearer(f.default.getToken()).then(function(e){var a=e.text,i=apiUrl+"/video/"+t.props.videoID+"/blob"+a;t.posterUpdated(i,a),t.setState({savingPosterFromAPI:!1})}).catch(function(e){t.setState({savingPosterFromAPI:!1}),f.default.receivedAPIError(e),t.setState({saving:!1}),alert("Thumbnail failed to save. Please try again.")})}},{key:"isLowRes",value:function(e){return e=e||this.state.videoMeta,this.state.videoMeta&&this.videoNode&&this.state.videoMeta.originalWidth<c.default.findDOMNode(this.videoNode).clientWidth}},{key:"setPosterSize",value:function(e){var t=this;if(e||(e=this.state.videoMeta),this.player&&this.player.poster()){var a=this.player.el().querySelector(".vjs-poster");if(this.state.lowRes&&this.player&&this.player.poster().indexOf("/posters/")>-1)a.style.backgroundSize=e.originalWidth+"px "+e.originalHeight+"px";else{var i=this.state.backgroundAspectRatio;null==i?F(a,function(e){i=e,t.setState({backgroundAspectRatio:i}),z(a,i)}):z(a,i)}}}},{key:"setScriptEditorValue",value:function(e,t){var a=f.default.findAncestor(this.player.el(),"ms-rte-embedcode").getAttribute("inputfield");a||(a=f.default.findAncestor(this.player.el(),"ms-WPBody").getAttribute("webpartid2")+"scriptcontent");var i=(0,k.getShareCode)(this.props.videoID,e,t,this.props.startTime,this.props.duration,this.props.fileSize),n=document.getElementById("aspnetForm"),s=n.querySelector('input[name="'+a+'"]');s||((s=document.createElement("input")).type="hidden",s.name=a,n.appendChild(s)),s.value=i}},{key:"dimensionBox",value:function(){return this.state.dimensionBoxSize?u.default.createElement("div",{className:"ka-resizer-dimensionBox"},this.state.dimensionBoxSize.width," x ",this.state.dimensionBoxSize.height):null}},{key:"isTranscoding",value:function(){return this.state.transcode&&this.state.transcode.progress<100||"NOFILEYET"===this.state.videoMeta.transcodeStatus||"PENDING"===this.state.videoMeta.transcodeStatus}},{key:"isInEditor",value:function(){return this.props.inEditor||(0,D.isEditingWebpartPage)()||(0,D.isEditingWikiPage)()}},{key:"onKeyDown",value:function(e){32!==(e||window.event).keyCode||this.state.titleEditorOpen||this.state.posterEditorOpen||(this.player.paused()?this.player.play():this.player.pause(),e.preventDefault())}},{key:"renderPlayer",value:function(){var e=this,t=this.isInEditor();return this.state.videoMeta&&"FAILED"===this.state.videoMeta.transcodeStatus?u.default.createElement("div",{style:{textAlign:"center",padding:5,background:"lightgrey"}},"Video processing failed.",u.default.createElement("br",null),"Please try uploading your video again."):!t&&this.isTranscoding()?u.default.createElement(C.default,{width:this.props.width}):u.default.createElement("div",{className:this.props.className,style:this.state.containerStyle},u.default.createElement("div",{"data-vjs-player":!0,onClick:this.props.onClick,tabIndex:0,onKeyDown:this.onKeyDown},u.default.createElement("video",{ref:function(t){return e.videoNode=t},id:this.state.playerID,crossOrigin:!this.props.hideCog&&P.default.firefox?void 0:"use-credentials",className:"video-js vjs-big-play-centered"}),u.default.createElement("div",{className:"ka-overlayBG ka-playOverlay",onClick:this.backgroundClick}),u.default.createElement("div",{className:"ka-titleBar ka-playOverlay",onClick:this.backgroundClick},this.state.videoMeta&&u.default.createElement("div",{className:"ka-title",spellCheck:!1},this.state.videoMeta.title||this.state.videoMeta.originalFilename),t&&!this.props.hideCog&&!this.state.setupMode&&(!this.state.transcode||this.state.transcode.progress>=100)&&u.default.createElement(g.default,{videoID:this.props.videoID,width:this.props.width,height:this.props.height,setPlayerHovered:function(t){return e.setState({hovered:t})},openPosterEditor:function(){return e.setState({posterEditorOpen:!0})},openTitleEditor:function(){e.props.requestInputControl&&e.props.requestInputControl(),e.setState({titleEditorOpen:!0})},player:this.player}),!this.state.setupMode&&(!this.state.transcode||this.state.transcode.progress>=100)&&u.default.createElement("div",{className:"ka-titleIcon ka-share",onClick:function(t){t.stopPropagation(),e.props.requestInputControl&&e.props.requestInputControl(),e.setState({shareDialogOpen:!0})}},u.default.createElement("img",{src:m.static_images.share_white_20}))),this.isTranscoding()&&u.default.createElement(b.default,{fileSize:this.state.videoMeta.fileSize,videoDuration:this.state.videoMeta.duration,uploadedAt:this.state.videoMeta.uploadedAt,backgroundClick:this.backgroundClick,progress:this.state.transcode?this.state.transcode.progress:0,inEditor:this.props.inEditor}),this.state.setupMode&&u.default.createElement(S.default,{onClose:function(t){t.stopPropagation(),e.setState({setupMode:!1})},onEdit:function(t){t.stopPropagation(),e.setState({titleEditorOpen:!0}),e.props.requestInputControl&&e.props.requestInputControl()},backgroundClick:this.backgroundClick}),this.state.shareDialogOpen&&u.default.createElement(E.default,{videoID:this.props.videoID,width:this.props.width,height:this.props.height,onClose:function(){e.setState({shareDialogOpen:!1}),e.props.releaseInputControl&&e.props.releaseInputControl()},currentTime:this.props.player?Math.floor(this.props.player.currentTime()):void 0}),this.state.titleEditorOpen&&u.default.createElement(w.default,{onClose:function(){e.setState({titleEditorOpen:!1,setupMode:!1}),e.props.releaseInputControl&&e.props.releaseInputControl()},onTitleUpdated:this.titleUpdated,videoID:this.props.videoID,title:this.state.videoMeta.title,poster:this.state.videoMeta.previewImageFilename,duration:this.state.videoMeta.duration,setupMode:this.state.setupMode}),this.state.posterEditorOpen&&u.default.createElement(I.default,{onClose:function(){return e.setState({posterEditorOpen:!1,setupMode:!1})},posterUpdated:this.posterUpdated,setPreviewAtTimeUsingAPI:this.setPreviewAtTimeUsingAPI,videoID:this.props.videoID,title:this.state.videoMeta.title,previewImageFilename:this.state.videoMeta.previewImageFilename,duration:this.state.videoMeta.duration,setupMode:this.state.setupMode,playerAspectRatio:this.player.el().clientWidth/this.player.el().clientHeight}),this.state.savingPosterFromAPI&&u.default.createElement(A.default,{backgroundClick:this.backgroundClick}),this.state.duration&&u.default.createElement("div",{className:"ka-footerBar ka-playOverlay",onClick:this.backgroundClick},u.default.createElement(y.default,{duration:this.state.duration})),u.default.createElement("div",{className:"ka-videoError"},u.default.createElement("div",{className:"ka-videoErrorTitle"},"This video is currently unavailable."),u.default.createElement("div",{className:"ka-videoErroBody"},"Please try refreshing the page. If the problem persists, contact an administrator."))))}},{key:"render",value:function(){var e=this;return this.state.isResizable?u.default.createElement(M.default,{onClose:function(){return e.setState({isSelected:!1})}},u.default.createElement(O,{className:this.state.isSelected?"ka-video-resizer":void 0,enable:this.state.isSelected?x:W,size:{width:this.state.width,height:this.state.height},handleClasses:B,minWidth:_.MIN_VIDEO_WIDTH,minHeight:this.props.width&&this.props.height?_.MIN_VIDEO_WIDTH/(this.props.width/this.props.height):void 0,maxWidth:_.MAX_VIDEO_WIDTH,maxHeight:this.props.width&&this.props.height?_.MAX_VIDEO_WIDTH/(this.props.width/this.props.height):void 0,lockAspectRatio:!0,onResize:function(t,a,i,n){var s=e.state.width+n.width,o=(e.state.height,n.height,e.getSizeBasedOnParentAndAspect(s,20));e.setState({dimensionBoxSize:o}),e.player.width(o.width),e.player.height(o.height)},onResizeStop:function(t,a,i,n){var s=e.state.width+n.width,o=(e.state.height,n.height,e.getSizeBasedOnParentAndAspect(s,20));e.setState({width:o.width,height:o.height}),e.setScriptEditorValue(o.width,o.height),window.setTimeout(function(){return e.setState({dimensionBoxSize:null})},1e3)}},this.renderPlayer(),this.dimensionBox())):this.renderPlayer()}}]),t}(d.Component),W={top:!1,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},x={top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},B={topRight:"ka-video-resizer-handle",bottomRight:"ka-video-resizer-handle",bottomLeft:"ka-video-resizer-handle",topLeft:"ka-video-resizer-handle"},R={autoplay:!1,controls:!0,techOrder:["html5"],html5:{hls:{withCredentials:!0}}},F=function(e,t){var a=e.style.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0],i=new Image;i.addEventListener("load",function(){t(i.width/i.height)}),i.src=a},z=function(e,t){var a=t-e.clientWidth/e.clientHeight;a>=-.01&&.01>=a&&0!==a&&(e.style.backgroundSize=e.clientWidth+"px "+e.clientHeight+"px")};H.propTypes={videoID:h.default.string.isRequired,width:h.default.number,height:h.default.number,startTime:h.default.number},t.default=H}).call(this,a(201))},238:function(e,t,a){},239:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreviewImageBlob=void 0;var i=g(a(181)),n=g(a(182)),s=g(a(183)),o=g(a(184)),r=g(a(185)),l=a(177),d=g(l),u=g(a(187)),c=g(a(192)),h=g(a(179)),p=g(a(191)),m=(g(a(204)),a(188)),f=a(189),v=a(331);function g(e){return e&&e.__esModule?e:{default:e}}a(511),ArrayBuffer.isView||a(301),String.prototype.startsWith||a(302),String.prototype.endsWith||a(303),String.prototype.includes||a(304),String.prototype.repeat||a(262),Array.prototype.includes||a(305);var y=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={uploadAttempt:0,progress:0,fileObjectUrl:b(e.file)},a.abortUpload=a.abortUpload.bind(a),a.getUploadTicket=a.getUploadTicket.bind(a),a.setPlayPosition=a.setPlayPosition.bind(a),a.uploadBlob_chunked=a.uploadBlob_chunked.bind(a),a.checkIfWeCanGetAPreviewImage=a.checkIfWeCanGetAPreviewImage.bind(a),a.checkIfVideoUploadIsDone=a.checkIfVideoUploadIsDone.bind(a),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.props.file&&this.getUploadTicket(this.props.file)}},{key:"componentWillUnmount",value:function(){this.abortUpload()}},{key:"abortUpload",value:function(){this.req&&(this.req.abort(),delete this.req),this.cancelUploadFilter&&(this.cancelUploadFilter.cancel=!0)}},{key:"checkIfWeCanGetAPreviewImage",value:function(e){var t=this,a=u.default.findDOMNode(this.videoNode);a.readyState>=2?k(e,a,this.checkIfVideoUploadIsDone):this.state.cantPlayLocalFile?this.checkIfVideoUploadIsDone(e):(a.addEventListener("loadeddata",function(){return k(e,a,t.checkIfVideoUploadIsDone)}),a.addEventListener("error",function(){return t.checkIfVideoUploadIsDone(e)},!0))}},{key:"checkIfVideoUploadIsDone",value:function(e){this.state.videoUploadDone?this.props.onUploadEnd(this.state.mediaID,this.state.duration):this.setState({previewImageUplaodDone:!0,mediaID:e})}},{key:"getUploadTicket",value:function(e){var t=this;this.state.uploadAttempt<2&&(this.setState({uploadAttempt:this.state.uploadAttempt+1}),this.req=p.default.post(window.apiUrl+"/subitem/uploadticket").set({Authorization:"Bearer "+h.default.getToken()}).send({SubItemType:"Video",OriginalFilename:e.name,MIMEType:e.type,fileSize:e.size,duration:this.videoNode?this.videoNode.duration:void 0}).end(function(a,i){a||!i.ok?(0,f.logError)(a||i.text):(t.checkIfWeCanGetAPreviewImage(i.body.results[0].subItemID),t.uploadBlob_chunked(e,i.body.results[0]))}))}},{key:"uploadBlob",value:function(e,t){var a=this;this.req=p.default.put(t.azureStorageSASURL).set({"x-ms-blob-type":"BlockBlob","x-ms-version":"2017-04-17"}).send(e).on("progress",function(e){a.setState({progress:e.percent}),a.setPlayPosition(e.percent)}).end(function(i,n){a.req=void 0,i||!n.ok?((0,f.logError)(i||n.text),a.abortUpload(),a.props.onUploadFail(e)):a.state.previewImageUplaodDone?a.props.onUploadEnd(t.subItemID,a.videoNode.duration):a.setState({videoUploadDone:!0,mediaID:t.subItemID,duration:a.videoNode.duration})})}},{key:"uploadBlob_chunked",value:function(e,t){var a=this;this.setState({subItemID:t.subItemID});var i=v.StorageURL.newPipeline(new v.AnonymousCredential,{}),n=new v.BlobURL(t.azureStorageSASURL,i),s=v.BlockBlobURL.fromBlobURL(n);this.uploadAborter=v.Aborter.none,(0,v.uploadBrowserDataToBlockBlob)(this.uploadAborter,e,s,{blockSize:4194304,progress:function(t){var i=t.loadedBytes/e.size*100;e.size>104857600&&(i=Math.max(i,2)),a.setState({progress:i}),a.setPlayPosition(i)}}).then(function(e){a.props.onUploadEnd(a.state.subItemID,a.videoNode.duration)}).catch(function(e){"aborted"!==e.status&&console.error(e)})}},{key:"setPlayPosition",value:function(e){this.videoNode&&this.videoNode.duration&&e&&(this.videoNode.currentTime=this.videoNode.duration*(e/100))}},{key:"render",value:function(){var e=this,t=this.props.file;return d.default.createElement(c.default,{title:"Uploading Your Video...",onClose:this.props.onClose,disableOverlayClick:!0},d.default.createElement("br",null),d.default.createElement("div",{style:{position:"relative",background:"black"}},d.default.createElement("video",{width:480,height:270,ref:function(t){return e.videoNode=t},src:this.state.fileObjectUrl,type:t.type,style:{display:"block"},onError:function(t){e.setState({cantPlayLocalFile:!0})}}),d.default.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(255,255,255,.5)"}})),d.default.createElement("div",{className:"ka_imgUploadProgress",style:{position:"static",marginTop:5}},d.default.createElement("div",{style:{width:this.state.progress+"%"}})))}}]),t}(l.Component);t.default=y;var b=function(e){try{return URL.createObjectURL(e)}catch(e){return(0,f.logError)(e),null}},k=function(e,t,a){E(t,function(i){p.default.post((0,m.buildReqUrl)("/video/"+e+"/previewimage")).authBearer(h.default.getToken()).attach("itsablob",i,t.currentTime+".png").then(function(t){a(e)}).catch(function(t){h.default.receivedAPIError(t),a(e)})})},E=t.getPreviewImageBlob=function(e,t){var a=document.createElement("canvas");a.width=e.videoWidth,a.height=e.videoHeight,a.getContext("2d").drawImage(e,0,0),a.toBlob(t)}},246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(177),n=l(i),s=l(a(192)),o=a(214),r=a(179);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.onClose,a=e.fileAlerts;return n.default.createElement(s.default,{className:"ka-fileAlert",onClose:t,hideX:!0},d(a.imagesTooLarge,o.ALERT_IMAGE_SIZE),d(a.videosTooLarge,o.ALERT_VIDEO_SIZE),d(a.docsTooLarge,o.ALERT_DOC_SIZE),d(a.filesBlocked,o.ALERT_DOC_TYPE),d(a.fileUploadFailures,o.ALERT_UPLOAD_FAILED),d(a.videoUploadFailures,o.ALERT_VIDEO_FAILED),d(a.blockedVideoFormat,o.ALERT_VID_TYPE),n.default.createElement("div",{style:{textAlign:"right"}},n.default.createElement("input",{type:"button",className:"ka_button",value:"OK",onClick:t})))};var d=function(e,t){if(e&&e.length>0)return n.default.createElement("div",null,n.default.createElement("div",{className:"kamodal-title",style:{marginLeft:0}},t.title),e.map(u),n.default.createElement("span",{className:"kamodal-message",dangerouslySetInnerHTML:{__html:t.message}}))},u=function(e,t){return n.default.createElement("div",{key:t,style:{paddingTop:10}},n.default.createElement("img",{src:r.imgRoot+"yield_red_med.svg",style:{width:23,height:22,verticalAlign:"middle"}}),n.default.createElement("span",{style:{fontWeight:500,marginLeft:10}},e.name),n.default.createElement("span",{style:{fontWeight:500,marginLeft:20}},c(e.size)))},c=function(e){var t="MB";return(e=e/1024/1024)>1024&&(e/=1024,t="GB"),e>1024&&(e/=1024,t="TB"),n.default.createElement(i.Fragment,null,e.toFixed(1)," ",t)}},249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(236),s=(i=n)&&i.__esModule?i:{default:i};t.default=s.default},261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShareCode=void 0;var i=g(a(181)),n=g(a(182)),s=g(a(183)),o=g(a(184)),r=g(a(185)),l=a(177),d=g(l),u=g(a(187)),c=g(a(180)),h=g(a(192)),p=a(179),m=a(205),f=a(207),v=g(a(499));function g(e){return e&&e.__esModule?e:{default:e}}a(238);var y=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),s=e.width?parseInt(e.width):f.DEF_VIDEO_WIDTH,r=e.height?parseInt(e.height):f.DEF_VIDEO_HEIGHT;return a.state={shareStartChecked:!1,shareStartValue:a.props.currentTime?(0,m.toHHMMSS)(a.props.currentTime):"0:00",shareStartTime:a.props.currentTime||0,shareStartChecked_embed:!1,shareStartValue_embed:a.props.currentTime?(0,m.toHHMMSS)(a.props.currentTime):"0:00",shareStartTime_embed:a.props.currentTime||0,shareWidth:s,shareHeight:r,aspectRatio:s/r},a.getShareUrl=a.getShareUrl.bind(a),a.updateShareWidth=a.updateShareWidth.bind(a),a.updateShareHeight=a.updateShareHeight.bind(a),a.shareWidthKeyDown=a.shareWidthKeyDown.bind(a),a.shareHeightKeyDown=a.shareHeightKeyDown.bind(a),a.shareWidthChanged=a.shareWidthChanged.bind(a),a.shareHeightChanged=a.shareHeightChanged.bind(a),a.startCheckChanged=a.startCheckChanged.bind(a),a.startValueChanged=a.startValueChanged.bind(a),a.startValueBlur=a.startValueBlur.bind(a),a.startCheckChanged_embed=a.startCheckChanged_embed.bind(a),a.startValueChanged_embed=a.startValueChanged_embed.bind(a),a.startValueBlur_embed=a.startValueBlur_embed.bind(a),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this;return d.default.createElement(l.Fragment,null,d.default.createElement(h.default,{title:"Share This Video on Your Intranet",titleHelp:d.default.createElement("img",{src:p.static_images.help_dark,width:20,height:20,"data-tip":b}),onClose:this.props.onClose},d.default.createElement("div",{className:"kamodal-subtitle"},"Share in a Post or Comment"),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("input",{ref:function(t){return e.shareUrl=t},type:"text",value:this.getShareUrl(),onChange:function(){},style:{width:350},onClick:function(){return e.copyText(e.shareUrl)}}),d.default.createElement("span",{className:"linkActive",style:{marginLeft:10},onClick:function(){return e.copyText(e.shareUrl)}},d.default.createElement("img",{src:p.static_images.link_cyan_16,style:{marginRight:10,verticalAlign:"middle"},width:16,height:20}),"Copy URL")),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("input",{type:"checkbox",checked:this.state.shareStartChecked,onChange:this.startCheckChanged})," Start video at  ",d.default.createElement("input",{type:"text",value:this.state.shareStartValue,onChange:this.startValueChanged,onBlur:this.startValueBlur,className:"ka-little-input"})),d.default.createElement("div",{className:"kamodal-subtitle"},"Embed in a Wiki Page",d.default.createElement("img",{src:p.static_images.help_dark,width:20,height:20,style:{verticalAlign:"middle",marginLeft:10},"data-tip":k})),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("textarea",{ref:function(t){return e.embedCode=t},style:{resize:"vertical",width:350,height:35,overflow:"hidden"},value:this.getShareCode(),onChange:function(){},spellCheck:!1,onClick:function(){return e.copyText(e.embedCode)}}),d.default.createElement("span",{className:"linkActive",style:{marginLeft:10},onClick:function(){return e.copyText(e.embedCode)}},d.default.createElement("img",{src:p.static_images.embed_code_cyan,style:{marginRight:10,verticalAlign:"middle"},width:24,height:24}),"Copy Embed Code")),d.default.createElement("div",{className:"kamodal-block"},"Video Size:  ",d.default.createElement("input",{type:"text",value:this.state.shareWidth,onChange:this.shareWidthChanged,onKeyDown:this.shareWidthKeyDown,className:"ka-little-input"}),"  x  ",d.default.createElement("input",{type:"text",value:this.state.shareHeight,onChange:this.shareHeightChanged,onKeyDown:this.shareHeightKeyDown,className:"ka-little-input"}),"  pixels"),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("input",{type:"checkbox",checked:this.state.shareStartChecked_embed,onChange:this.startCheckChanged_embed})," Start video at  ",d.default.createElement("input",{type:"text",value:this.state.shareStartValue_embed,onChange:this.startValueChanged_embed,onBlur:this.startValueBlur_embed,className:"ka-little-input"}))),u.default.createPortal(d.default.createElement(l.Fragment,null,d.default.createElement(v.default,{place:"top",type:"light",effect:"solid",className:"ka-tooltip",scrollHide:!0,html:!0,delayHide:1500})),document.body)," ")}},{key:"getShareUrl",value:function(){var e=window.location.origin+"/_layouts/video/player.aspx?id="+this.props.videoID;return this.state.shareStartChecked&&0!==this.state.shareStartTime&&(e+="&start="+this.state.shareStartTime),e}},{key:"getShareCode",value:function(){return S(this.props.videoID,this.state.shareWidth,this.state.shareHeight,this.state.shareStartChecked_embed?this.state.shareStartTime_embed:void 0)}},{key:"shareWidthChanged",value:function(e){/[^0-9]/.test(e.target.value)||this.updateShareWidth(parseInt(e.target.value))}},{key:"shareWidthKeyDown",value:function(e){switch(e.keyCode){case 38:this.updateShareWidth(this.state.shareWidth+1),e.stopPropagation();break;case 40:this.updateShareWidth(this.state.shareWidth-1),e.stopPropagation()}}},{key:"updateShareWidth",value:function(e){this.setState({shareWidth:e,shareHeight:Math.round(e/this.state.aspectRatio)})}},{key:"shareHeightChanged",value:function(e){/[^0-9]/.test(e.target.value)||this.updateShareHeight(parseInt(e.target.value))}},{key:"shareHeightKeyDown",value:function(e){switch(e.keyCode){case 38:this.updateShareHeight(this.state.shareHeight+1),e.stopPropagation();break;case 40:this.updateShareHeight(this.state.shareHeight-1),e.stopPropagation()}}},{key:"updateShareHeight",value:function(e){this.setState({shareHeight:e,shareWidth:Math.round(e*this.state.aspectRatio)})}},{key:"startCheckChanged",value:function(e){this.setState({shareStartChecked:e.target.checked})}},{key:"startValueChanged",value:function(e){/[^0-9:]/.test(e.target.value)||this.setState({shareStartValue:e.target.value,shareStartChecked:!0,shareStartTime:E(e.target.value)||0})}},{key:"startValueBlur",value:function(e){E(e.target.value)?this.setState({shareStartValue:(0,m.toHHMMSS)(this.state.shareStartTime)}):this.setState({shareStartValue:"0:00"})}},{key:"startCheckChanged_embed",value:function(e){this.setState({shareStartChecked_embed:e.target.checked})}},{key:"startValueChanged_embed",value:function(e){/[^0-9:]/.test(e.target.value)||this.setState({shareStartValue_embed:e.target.value,shareStartChecked_embed:!0,shareStartTime_embed:E(e.target.value)||0})}},{key:"startValueBlur_embed",value:function(e){E(e.target.value)?this.setState({shareStartValue_embed:(0,m.toHHMMSS)(this.state.shareStartTime_embed)}):this.setState({shareStartValue_embed:"0:00"})}},{key:"copyText",value:function(e){e.select(),document.execCommand("Copy")}}]),t}(l.Component),b='Can Synthesis Videos be shared outside our Intranet? Nope! This URL and Embed Code only works within your intranet. Learn more in <a href="https://knowledgearchitecture.zendesk.com/hc/en-us/articles/360015148192-Can-Synthesis-Native-Video-Be-Shared-Outside-Our-Intranet-" target="_blank">this article</a>.',k="To embed this video in a Wiki Page:<br/><br/><span style='font-weight:500'>1.</span> Copy code below.<br/><span style='font-weight:500'>2.</span> Edit your Wiki Page.<br/><span style='font-weight:500'>3.</span> Click on Insert ribbon.<br/><span style='font-weight:500'>4.</span> Click on Embed Code tool.<br/><span style='font-weight:500'>5.</span> Paste in your code and click Insert.",E=function(e){var t=e.split(":");switch(t.length){case 1:return parseInt(t[0])||0;case 2:return 60*(parseInt(t[0])||0)+(parseInt(t[1])||0);case 3:return 60*(parseInt(t[0])||0)*60+60*(parseInt(t[1])||0)+(parseInt(t[2])||0);default:return NaN}},S=function(e,t,a,i,n,s,o){var r='<ka-video id="'+e+'" width="'+(t||f.DEF_VIDEO_WIDTH)+'" height="'+(a||f.DEF_VIDEO_HEIGHT)+'"';return i&&(r+=' start="'+i+'"'),n&&(r+=' duration="'+n+'"'),s&&(r+=' fileSize="'+s+'"'),o&&(r+=' uploaded="'+o+'"'),r+="></ka-video>"};t.getShareCode=S,y.propTypes={currentTime:c.default.number},t.default=y},283:function(e,t,a){},284:function(e,t,a){},291:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(a(181)),n=c(a(182)),s=c(a(183)),o=c(a(184)),r=c(a(185)),l=a(177),d=c(l),u=c(a(203));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={menuOpen:!1,shareOpen:!1},a.openMenu=a.openMenu.bind(a),a.closeMenu=a.closeMenu.bind(a),a.openShare=a.openShare.bind(a),a.closeShare=a.closeShare.bind(a),a.openTitleEditor=a.openTitleEditor.bind(a),a.openPosterEditor=a.openPosterEditor.bind(a),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"openMenu",value:function(e){e.stopPropagation(),this.props.setPlayerHovered(!0),this.setState({menuOpen:!0})}},{key:"closeMenu",value:function(){this.props.setPlayerHovered(!1),this.setState({menuOpen:!1})}},{key:"openShare",value:function(){this.setState({menuOpen:!1}),this.props.openShareDialog()}},{key:"closeShare",value:function(){this.setState({shareOpen:!1}),this.props.setPlayerHovered(!1)}},{key:"openTitleEditor",value:function(){this.setState({menuOpen:!1}),this.props.openTitleEditor()}},{key:"openPosterEditor",value:function(){this.setState({menuOpen:!1}),this.props.openPosterEditor()}},{key:"render",value:function(){return d.default.createElement("div",{className:"ka-titleIcon ka-cog",onClick:function(e){return e.stopPropagation()}},d.default.createElement("span",{onClick:this.openMenu},""),d.default.createElement("div",{className:"ka_calloutMenu"},this.state.menuOpen&&d.default.createElement(u.default,{onClose:this.closeMenu},d.default.createElement("div",null,this.props.openShareDialog&&d.default.createElement("span",{onClick:this.openShare},"Share Video"),this.props.openTitleEditor&&d.default.createElement("span",{onClick:this.openTitleEditor},"Edit Title"),this.props.openPosterEditor&&d.default.createElement("span",{onClick:this.openPosterEditor},"Edit Thumbnail"),d.default.createElement("div",{className:"tri center"},d.default.createElement("div",null))))))}}]),t}(l.Component);t.default=h},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a(181)),n=p(a(182)),s=p(a(183)),o=p(a(184)),r=p(a(185)),l=a(177),d=p(l),u=a(205),c=p(a(228)),h=p(a(225));function p(e){return e&&e.__esModule?e:{default:e}}a(238);var m=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={timeRemaining:k(e.videoDuration,e.fileSize,e.progress,e.uploadedAt),beginningTranscodeEstimate:k(e.videoDuration,e.fileSize,0,null)},a.timer=null,a.startTimer=a.startTimer.bind(a),a.startTimer(),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"startTimer",value:function(){var e=this;this.timer=setInterval(function(){e.setState({timeRemaining:Math.max(e.state.timeRemaining-1,0)})},1e3)}},{key:"componentWillReceiveProps",value:function(e){e.videoDuration&&!this.props.videoDuration&&this.setState({timeRemaining:k(e.videoDuration,e.fileSize,e.progress,e.uploadedAt),beginningTranscodeEstimate:k(e.videoDuration,e.fileSize,0,null)})}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"stopTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"render",value:function(){return d.default.createElement(h.default,{title:(this.state.timeRemaining>0?"Processing":"Finishing")+"  Your Video...",backgroundClick:this.props.backgroundClick},this.state.timeRemaining>0?d.default.createElement(l.Fragment,null,"Estimated Time Remaining: ",d.default.createElement("b",null,(0,u.toHHMMSS)(this.state.timeRemaining)),d.default.createElement("i",{className:"ka_vidTrancode_body"},d.default.createElement("span",{className:"wikiProcessingMessage"},v,b),d.default.createElement("span",{className:"postProcessingMessage"},g,b),d.default.createElement("span",{className:"commentProcessingMessage"},y,b)),d.default.createElement("i",{className:"ka_vidTrancode_helpLink"},"Learn more in ",d.default.createElement("a",{href:f,target:"_blank"},"this article"),".")):d.default.createElement("div",{style:{textAlign:"center",paddingTop:10,marginBottom:25}},d.default.createElement(c.default,{style:{position:"static"}})))}}]),t}(l.Component);t.default=m;var f="https://knowledgearchitecture.zendesk.com/hc/en-us/articles/360015147992-Behind-the-Scenes-of-Synthesis-Native-Video-Uploads",v="Feel free to save your page while your video is processing. Your video will appear as soon as it is finished processing.",g="You can publish your post once your video is finished processing. In the meantime, feel free to save a draft of your post and return to it later.",y="You can post your comment once your video is finished processing. Your draft comment has been saved so you can return to it later.",b=" We’ll send you an e-mail when your video is finished.",k=function(e,t,a,i){if(t=t||0,e){var n=void 0;if(n=e<120&&t<7e7?50:.06*e+t/9e6+60,a>0?n*=1-.01*a:n=n,i)n-=((new Date).getTime()-i)/1e3;return n}return 90}},293:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(a(177)),n=s(a(225));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.onEdit,a=(e.onClose,e.backgroundClick);return i.default.createElement(n.default,{title:"Edit Video Title + Thumbnail",backgroundClick:a},"Make your video more searchable and appealing by giving it a useful Title and Thumbnail.",i.default.createElement("div",{style:{margin:"0 0 20px",textAlign:"right"}},i.default.createElement("div",{className:"ka_button ka_buttonActive",style:{display:"inline-block"},spellCheck:!1,onClick:t},"Next")))}},294:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=y(a(181)),n=y(a(182)),s=y(a(183)),o=y(a(184)),r=y(a(185)),l=a(177),d=y(l),u=y(a(187)),c=y(a(192)),h=y(a(205)),p=a(207),m=y(a(191)),f=a(188),v=a(179),g=y(v);function y(e){return e&&e.__esModule?e:{default:e}}a(216)(m.default);var b=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={title:e.title,updatingTitle:!1},a.getButtonText=a.getButtonText.bind(a),a.submitTitle=a.submitTitle.bind(a),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){var e=u.default.findDOMNode(this.input);e.focus(),e.value="",e.value=this.props.title}},{key:"submitTitle",value:function(){var e=this;if(this.props.title!==this.state.title){var t=this.state.title.trim();t&&(this.setState({updatingTitle:!0}),m.default.put((0,f.buildReqUrl)("/video/"+this.props.videoID+"/title")).authBearer(g.default.getToken()).type("json").send('"'+t+'"').then(function(a){e.props.onTitleUpdated(t)}).catch(function(t){g.default.receivedAPIError(t),e.setState({updatingTitle:!1})}))}else this.props.setupMode?this.props.onTitleUpdated(this.props.title):this.props.onClose()}},{key:"getButtonText",value:function(){return this.state.saving?"Saving...":this.props.setupMode?"Next":"Save"}},{key:"render",value:function(){var e=this;return d.default.createElement(c.default,{title:"Edit Video Title",fixedSize:!1,onClose:this.props.onClose,onKeyDown:function(e){return e.stopPropagation()},disableOverlayClick:!0},d.default.createElement("div",{className:"kamodal-subtitle"},"Preview"),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("div",{className:"video-js ka-video-mockPlayer vjs-big-play-centered",style:{width:p.DEF_VIDEO_WIDTH,height:p.DEF_VIDEO_HEIGHT}},d.default.createElement("img",{className:"poster",src:apiUrl+"/video/"+this.props.videoID+"/blob"+this.props.poster}),d.default.createElement("div",{className:"ka-titleBar"},d.default.createElement("span",{className:"ka-title"},this.state.title)),d.default.createElement("button",{className:"vjs-big-play-button","aria-disabled":"true"},d.default.createElement("span",{"aria-hidden":"true",className:"vjs-icon-placeholder"})),d.default.createElement("div",{className:"ka-footerBar"},d.default.createElement(h.default,{duration:this.props.duration})))),d.default.createElement("div",{className:"kamodal-subtitle"},"Title"),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("input",{className:"videoTitleInput",ref:function(t){return e.input=t},value:this.state.title,onChange:function(t){e.setState({title:t.target.value})}})),d.default.createElement("div",{className:"kamodal-block"},!this.state.title.trim()&&d.default.createElement("div",{style:{color:"#FF4947",display:"inline-block",marginTop:19}},d.default.createElement("img",{src:v.imgRoot+"Yield_25_Red.png",style:{verticalAlign:"middle"}})," Your video must have a title."),d.default.createElement("div",{className:"ka_button ka_buttonActive"+(this.state.updatingTitle||!this.state.title.trim()?" disabled":""),style:{display:"inline-block",float:"right",marginTop:15},onClick:this.state.updatingTitle?void 0:this.submitTitle,disabled:this.state.updatingTitle},this.getButtonText())))}}]),t}(l.Component);t.default=b},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=w(a(181)),n=w(a(182)),s=w(a(183)),o=w(a(184)),r=w(a(185)),l=a(177),d=w(l),u=w(a(187)),c=w(a(192)),h=w(a(205)),p=a(207),m=w(a(191)),f=a(188),v=a(179),g=w(v),y=w(a(236)),b=w(a(296)),k=a(239),E=w(a(204)),S=a(189);function w(e){return e&&e.__esModule?e:{default:e}}a(216)(m.default);var I=function(e){function t(e){(0,n.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.state={uploadStarted:!1,uploadProgress:0,stills:[],previewImageFilename:e.previewImageFilename},a.chooseThumbFromPC=a.chooseThumbFromPC.bind(a),a.thumbChosenFromPC=a.thumbChosenFromPC.bind(a),a.chooseThumbFromStill=a.chooseThumbFromStill.bind(a),a.chooseThumbFromVideo=a.chooseThumbFromVideo.bind(a),a.saveClicked=a.saveClicked.bind(a),a.getPoster=a.getPoster.bind(a),a.getPosterStyle=a.getPosterStyle.bind(a),a.thumbChosenFromStill=a.thumbChosenFromStill.bind(a),a.thumbHovered=a.thumbHovered.bind(a),a.thumbUnhovered=a.thumbUnhovered.bind(a),a.getButtonText=a.getButtonText.bind(a),a.renderVideo=a.renderVideo.bind(a),a.renderStill=a.renderStill.bind(a),a.resizeStillsContainer=a.resizeStillsContainer.bind(a),a.resizeStillContainer_timer=a.resizeStillContainer_timer.bind(a),a.getStills=a.getStills.bind(a),a.getStills(),a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeStillContainer_timer,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeStillContainer_timer,!1)}},{key:"getStills",value:function(){var e=this;m.default.get(apiUrl+"/video/"+this.props.videoID+"/blob/thumbs.json").withCredentials().then(function(t){var a=t.body.thumbnails;a.length>100&&(a=g.default.pickFrom(a,100)),a=(a=t.body.savedThumbnails.concat(a)).filter(function(e,t){return a.indexOf(e)===t}),e.setState({stills:a})}).catch(function(e){return(0,S.logError)(e)})}},{key:"chooseThumbFromPC",value:function(){this.setState({activeCategory:"computer"});var e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=this.thumbChosenFromPC,e.style.display="none",g.default.isIE()&&u.default.findDOMNode(this.ieBlows).appendChild(e),e.click()}},{key:"thumbChosenFromPC",value:function(e){var t=this;"image/gif"===e.target.files[0].type.toLowerCase()?alert("GIF is not an accepted format at this time."):-1===e.target.files[0].type.toLowerCase().indexOf("image/")?alert("Oops! You selected "+e.target.files[0].name+" but we need an image."):(this.setState({newPosterUrl:URL.createObjectURL(e.target.files[0]),uploadStarted:!0}),m.default.post((0,f.buildReqUrl)("/video/"+this.props.videoID+"/previewimage")).authBearer(g.default.getToken()).attach("itsafile",e.target.files[0],e.target.files[0].name).on("progress",function(e){return t.setState({uploadProgress:e.percent})}).then(function(e){t.setState({uploadStarted:!1,previewImageFilename:e.body.results[0]})}).catch(function(e){g.default.receivedAPIError(e),t.setState({uploadStarted:!1}),alert("Thumbnail failed to save. Please try again.")}))}},{key:"chooseThumbFromStill",value:function(){this.setState({activeCategory:"stills"}),window.setTimeout(this.resizeStillsContainer,0)}},{key:"chooseThumbFromVideo",value:function(){this.setState({activeCategory:"video"})}},{key:"saveClicked",value:function(){var e=this;if(!this.state.uploadStarted)if("stills"==this.state.activeCategory&&this.state.previewImageFilename)this.setState({saving:!0}),m.default.put(apiUrl+"/video/"+this.props.videoID+"/previewfilename").withCredentials().type("json").send('"'+this.state.previewImageFilename+'"').then(function(t){e.props.posterUpdated(e.state.newPosterUrl,e.state.previewImageFilename)}).catch(function(t){(0,S.logError)(t),e.setState({saving:!1}),alert("Thumbnail failed to save. Please try again.")});else if("computer"===this.state.activeCategory&&this.state.newPosterUrl)this.props.posterUpdated(this.state.newPosterUrl,this.state.previewImageFilename);else if("video"===this.state.activeCategory)if(this.kavideo.player.pause(),this.setState({saving:!0}),E.default.msie||E.default.safari)this.props.setPreviewAtTimeUsingAPI(this.kavideo.player.currentTime());else{var t=this.kavideo.player.el().querySelector("video");(0,k.getPreviewImageBlob)(t,function(t){var a=e.kavideo.player.currentTime()+".png";m.default.post((0,f.buildReqUrl)("/video/"+e.props.videoID+"/previewimage")).query({seconds:e.kavideo.player.currentTime()}).authBearer(g.default.getToken()).attach("itsablob",t,a).on("progress",function(t){return e.setState({uploadProgress:t.percent})}).then(function(i){e.props.posterUpdated(URL.createObjectURL(t),a)}).catch(function(t){g.default.receivedAPIError(t),e.setState({uploadStarted:!1}),alert("Thumbnail failed to save. Please try again.")})})}else this.props.onClose()}},{key:"getPoster",value:function(){return this.state.tempPosterUrl?this.state.tempPosterUrl:this.state.newPosterUrl?this.state.newPosterUrl:apiUrl+"/video/"+this.props.videoID+"/blob"+this.state.previewImageFilename}},{key:"getPosterStyle",value:function(e){return e.indexOf("/tinythumbs/")>-1||e.indexOf("/posters/")>-1?{height:"100%"}:void 0}},{key:"resizeStillsContainer",value:function(){var e=0,t=u.default.findDOMNode(this.modal).querySelector(".kamodal-container");t.childNodes.forEach(function(t){return e+=g.default.outterHeight(t)}),e-=g.default.outterHeight(t.querySelector(".kavideo-stillsContainer"));var a=.9*window.innerHeight-e,i=69*Math.floor(a/69)+27.6;i>a&&i--;var n=Math.min(345,i),s=69*Math.ceil(this.state.stills.length/5),o=Math.max(96.6,Math.min(n,s));this.setState({stillContHeight:o})}},{key:"resizeStillContainer_timer",value:function(){var e=this;"stills"===this.state.activeCategory&&(this.resizeTimer||(this.resizeTimer=window.setTimeout(function(){e.resizeTimer=null,e.resizeStillsContainer()},250)))}},{key:"thumbChosenFromStill",value:function(e){var t=void 0;t=e.length>12&&"/tinythumbs/"===e.substring(0,12)?"/posters/"+e.substring(12):e;var a=apiUrl+"/video/"+this.props.videoID+"/blob"+t;this.setState({newPosterUrl:a,previewImageFilename:t,tempPosterUrl:null})}},{key:"thumbHovered",value:function(e,t){var a=this;if(this.setState({tempPosterUrl:apiUrl+"/video/"+this.props.videoID+"/blob"+e}),e.length>12&&"/tinythumbs/"===e.substring(0,12)){var i="/posters/"+e.substring(12);window.setTimeout(function(){return a.setState({tempPosterUrl:apiUrl+"/video/"+a.props.videoID+"/blob"+i})},0)}}},{key:"thumbUnhovered",value:function(){this.setState({tempPosterUrl:null})}},{key:"getButtonText",value:function(){return this.state.saving?"Saving...":this.state.uploadStarted?"Uploading...":"Save"}},{key:"renderVideo",value:function(){var e=this,t=p.DEF_VIDEO_WIDTH,a=t/this.props.playerAspectRatio;if("video"===this.state.activeCategory)return d.default.createElement(y.default,{videoID:this.props.videoID,videoMeta:this.state.videoMeta,openToBeginning:!0,width:t,height:a,hideCog:!0,disableSizing:!0,disableThumbnails:!0,ref:function(t){return e.kavideo=t}});var i=this.getPoster();return d.default.createElement("div",{className:"video-js ka-video-mockPlayer vjs-big-play-centered",style:{width:t,height:a},ref:function(t){return e.mockPlayer=t}},d.default.createElement("img",{className:"poster",src:i,style:this.getPosterStyle(i)}),d.default.createElement("div",{className:"ka-titleBar"},d.default.createElement("span",{className:"ka-title"},this.props.title)),d.default.createElement("button",{className:"vjs-big-play-button","aria-disabled":"true"},d.default.createElement("span",{"aria-hidden":"true",className:"vjs-icon-placeholder"})),d.default.createElement("div",{className:"ka-footerBar"},d.default.createElement(h.default,{duration:this.props.duration})))}},{key:"renderStill",value:function(e,t){var a=this;return t>0||this.state.stillHeight?d.default.createElement("img",{src:apiUrl+"/video/"+this.props.videoID+"/blob"+e}):d.default.createElement("img",{src:apiUrl+"/video/"+this.props.videoID+"/blob"+e,ref:function(e){return a.firstStill=e},onLoad:this.resizeStillsContainer})}},{key:"render",value:function(){var e=this;return d.default.createElement(c.default,{title:"Edit Video Thumbnail",onClose:this.props.onClose,fixedSize:!1,disableOverlayClick:!0,ref:function(t){return e.modal=t}},d.default.createElement("div",{className:"kamodal-subtitle"},"Preview"),d.default.createElement("div",{className:"kamodal-block"},this.renderVideo()),this.state.uploadStarted&&d.default.createElement("div",{style:{height:0,position:"relative"}},d.default.createElement("div",{className:"ka_imgUploadProgress",style:{position:"absolute"}},d.default.createElement("div",{style:{width:this.state.uploadProgress+"%"}}))),d.default.createElement("div",{className:"kamodal-subtitle"},"Select a new Thumbnail Image"),d.default.createElement("div",{className:"kamodal-block"},d.default.createElement("span",{className:"kavideo-editThumbCategory"+("stills"===this.state.activeCategory?" active":""),onClick:this.chooseThumbFromStill},d.default.createElement("img",{src:v.static_images.image,className:"unhover",style:{width:25,height:25}}),d.default.createElement("img",{src:v.static_images.image_cyan,className:"hover",style:{width:25,height:25}}),"Select from stills."),d.default.createElement("span",{className:"kavideo-editThumbCategory"+("video"===this.state.activeCategory?" active":""),onClick:this.chooseThumbFromVideo},d.default.createElement("img",{src:v.static_images.play_grey_18,className:"unhover"}),d.default.createElement("img",{src:v.static_images.play_cyan_18,className:"hover"}),"Select from video."),d.default.createElement("span",{className:"kavideo-editThumbCategory"+("computer"===this.state.activeCategory?" active":""),onClick:this.chooseThumbFromPC},d.default.createElement("img",{src:v.static_images.upload_16,className:"unhover"}),d.default.createElement("img",{src:v.static_images.upload_16_cyan,className:"hover"}),"Upload from computer.")),"stills"===this.state.activeCategory&&d.default.createElement("div",{className:"kamodal-block"},d.default.createElement(b.default,{className:"kavideo-stillsContainer",style:{height:this.state.stillContHeight}},!this.state.stills.length>0&&d.default.createElement("img",{src:"/_layouts/15/Updates/images/Ajax-loader.gif",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:32,height:32,margin:0}}),this.state.stills.map(function(t,a){return d.default.createElement("div",{onClick:function(){return e.thumbChosenFromStill(t)},onMouseEnter:function(a){return e.thumbHovered(t,a.target)},onMouseLeave:e.thumbUnhovered,className:"still"+(_(e.state.previewImageFilename,t)?" active":""),key:a},d.default.createElement("div",null,e.renderStill(t,a)))}))),d.default.createElement("div",{className:"kamodal-block",style:{overflow:"hidden"}},d.default.createElement("div",{className:"ka_button ka_buttonActive"+(this.state.uploadStarted?" disabled":""),style:{display:"inline-block",float:"right",marginTop:15},onClick:this.saveClicked},this.getButtonText())),d.default.createElement("div",{ref:function(t){return e.ieBlows=t}}))}}]),t}(l.Component);t.default=I;var _=function(e,t){if(e)if(t.length>12&&"/tinythumbs/"===t.substring(0,12)){if(t.substring(12)===e.substring(9))return!0}else if(e===t)return!0;return!1}},296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(a(206)),n=p(a(181)),s=p(a(182)),o=p(a(183)),r=p(a(184)),l=p(a(185)),d=a(177),u=p(d),c=p(a(187)),h=p(a(500));function p(e){return e&&e.__esModule?e:{default:e}}a(501);var m=function(e){function t(){return(0,s.default)(this,t),(0,r.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,l.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){h.default.initEl(c.default.findDOMNode(this.box))}},{key:"render",value:function(){var e=this;return u.default.createElement("div",(0,i.default)({},this.props,{ref:function(t){return e.box=t}}))}}]),t}(d.Component);t.default=m},306:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(234),s=(i=n)&&i.__esModule?i:{default:i};t.default=function(e){var t,a,i,n,d,u,c,h,p,m={width:0,height:0,basePath:e.basePath||""};a=function e(){var t,a,i,n,o;t=Array.prototype.slice.call(arguments);a=t.shift()||{};for(i in t)for(o in n=t[i])n.hasOwnProperty(o)&&("object"===(0,s.default)(n[o])?a[o]=e(a[o],n[o]):a[o]=n[o]);return a}({},m,e);var f=(n=this).textTracks().length;if(0===f)return;p=0;for(;p<f;){var v=n.textTracks()[p];if("metadata"===v.kind&&"thumbnails"===v.label){(h=n.textTracks()[p]).mode="hidden";break}p++}var g=n.controlBar.progressControl;if(-1!==navigator.userAgent.toLowerCase().indexOf("android")){var y=function(){return g.removeClass("fake-active")};g.on("touchstart",function(){return g.addClass("fake-active")}),g.on("touchend",y),g.on("touchcancel",y)}(t=document.createElement("div")).className="vjs-thumbnail-holder";var b=document.createElement("div");b.className="ka-thumbnail-holderInner",t.appendChild(b),(i=document.createElement("img")).className="vjs-thumbnail",b.appendChild(i);var k=document.createElement("div");k.className="ka-video-scrubTime",b.appendChild(k),d=n.duration(),n.on("durationchange",function(e){return d=n.duration()}),n.on("loadedmetadata",function(e){return d=n.duration()}),g.el().appendChild(t),u=function(e){var n,s,u,c,f,v,y,E,S;E=(window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}).x,S=r(g.el()).getBoundingClientRect(),f=(S.width||S.right)+E,c=e.pageX,e.changedTouches&&(c=e.changedTouches[0].pageX),s=c||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s-=r(g.el()).getBoundingClientRect().left+E,n=Math.floor((s-g.el().offsetLeft)/g.width()*d),k.innerHTML=(0,o.toHHMMSS)(n);var w=h&&h.cues.length;for(p=0;p<w;){var I=h.cues[p];if(I.startTime<=n&&I.endTime>=n){u=l(I.text,m.basePath);break}p++}if(void 0!==u){u.src&&i.src!=u.src&&(i.src=u.src),0===u.w&&(u.w=a.width),0===u.h&&(u.h=a.height),v=u.w-u.x;var _=u.h-u.y+15;b.style.width==v&&b.style.height==u.h+15||(b.style.height=_+"px"),i.style.left=200==v?-u.x+"px":-u.x+(200-v)/2+"px",i.style.top=-u.y+"px",i.style.clip="rect("+u.y+"px,"+u.w+"px,"+u.h+"px,"+u.x+"px)",v=t.offsetWidth,s+(y=v/2)>f?s=f-v:s<y?s=0:s-=y,t.style.left=s+"px"}},g.on("mousemove",u),g.on("touchmove",u),c=function(e){return t.style.left="-10000px"},g.on("mouseleave",c),g.on("touchcancel",c),g.on("touchend",c),n.on("userinactive",c)};var o=a(205);function r(e){return"HTML"!==e.nodeName&&"static"===function(e,t){return function(a){return window.getComputedStyle?window.getComputedStyle(e,t)[a]:e.currentStyle[a]}}(e)("position")?r(e.offsetParent):e}function l(e,t){var a,i,n;if(-1===(i=e.indexOf("#")))return{src:t+e,w:0,h:0,x:0,y:0};if(a=e.substring(0,i),"xywh="!==(n=e.substring(i+1)).substring(0,5))return{src:defaults.basePath+a,w:0,h:0,x:0,y:0};var s=n.substring(5).split(",");return{src:t+a,w:parseInt(s[2]),h:parseInt(s[3]),x:parseInt(s[0]),y:parseInt(s[1])}}},307:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(177),s=(i=n)&&i.__esModule?i:{default:i},o=a(207);t.default=function(e){return s.default.createElement("div",{className:"ka_hangTight",style:{width:e.width?parseInt(e.width):o.DEF_VIDEO_WIDTH,height:(e.width?parseInt(e.width):o.DEF_VIDEO_WIDTH)/(16/9)}},s.default.createElement("div",null,s.default.createElement("div",{style:{fontSize:32}},"Hang tight..."),s.default.createElement("div",{style:{fontSize:24,marginTop:50}},"This video will be available shortly.")))}},308:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(a(177)),n=o(a(225)),s=o(a(228));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.backgroundClick;return i.default.createElement(n.default,{title:"Saving Your Thumbnail",backgroundClick:t},"This should take less than a minute.",i.default.createElement("div",{style:{textAlign:"center",paddingTop:15,marginBottom:25}},i.default.createElement(s.default,{style:{position:"static"}})))}},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e){e.exports={"A network error caused the media download to fail part-way.":"e1","The media could not be loaded, either because the server or network failed or because the format is not supported.":"e2","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"e3","No compatible source was found for this media.":"e4","The media playback was aborted because too many consecutive download errors occurred.":"e5","You aborted the media playback":"e6"}},326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MIME_VIDEO="video/*,video/mp4,video/x-m4v,video/webm"},330:function(e,t,a){},494:function(e,t){},510:function(e,t){}}]);
//# sourceMappingURL=video.kaModules.js.map